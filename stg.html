<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Storage: The Visual Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F8FAFC; color: #1E293B; }
        
        /* Chart Container Standards */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 350px; }
        }

        /* Custom Utilities for Diagrams (No SVG/Mermaid) */
        .flow-arrow::after {
            content: '▼';
            display: block;
            text-align: center;
            color: #6366F1; /* Indigo-500 */
            font-size: 1.5rem;
            margin-top: -0.5rem;
            margin-bottom: -0.5rem;
        }
        .flow-arrow-horizontal::after {
            content: '▶';
            display: inline-block;
            color: #6366F1;
            font-size: 1.5rem;
            margin: 0 10px;
        }
        
        /* Card Hover Effects */
        .hover-lift { transition: transform 0.2s, box-shadow 0.2s; }
        .hover-lift:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }

        /* Code Block Styling */
        .yaml-block {
            font-family: 'Courier New', Courier, monospace;
            background-color: #1E293B; /* Slate-800 */
            color: #E2E8F0; /* Slate-200 */
            padding: 1rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            overflow-x: auto;
            border-left: 4px solid #6366F1;
        }
        .yaml-comment { color: #94A3B8; font-style: italic; }
        .yaml-key { color: #38BDF8; } /* Sky-400 */
        .yaml-val { color: #A5B4FC; } /* Indigo-300 */

        /* Palette: Vibrant & Tech-Focused */
        /* Primary: #4F46E5 (Indigo), Secondary: #06B6D4 (Cyan), Accent: #D946EF (Fuchsia) */
    </style>
</head>
<body class="overflow-x-hidden">

    <!-- HEADER SECTION -->
    <header class="bg-gradient-to-r from-indigo-600 to-cyan-500 text-white py-16 px-4 shadow-lg">
        <div class="max-w-6xl mx-auto text-center">
            <h1 class="text-5xl md:text-6xl font-extrabold mb-6 tracking-tight">Kubernetes Storage</h1>
            <p class="text-xl md:text-2xl font-light opacity-90 max-w-3xl mx-auto">
                A visual masterclass on Volumes, Persistent Claims, Dynamic Provisioning, and the CSI ecosystem.
            </p>
            <div class="mt-8 flex justify-center space-x-4 flex-wrap gap-2">
                <span class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-semibold">PV & PVC</span>
                <span class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-semibold">ConfigMap</span>
                <span class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-semibold">Access Modes</span>
                <span class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-semibold">Reclaim Policy</span>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-12 space-y-20">

        <!-- SECTION 1: THE STORAGE SPECTRUM (Updated with ConfigMap) -->
        <section>
            <div class="mb-8 border-l-8 border-indigo-500 pl-6">
                <h2 class="text-3xl font-bold text-gray-800">1. The Storage Spectrum</h2>
                <p class="mt-2 text-lg text-gray-600">
                    From configuration data to persistent databases, choosing the right volume type is critical.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                <!-- Text Content -->
                <div class="space-y-6">
                    <!-- Ephemeral Card -->
                    <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-cyan-400 hover-lift">
                        <h3 class="text-xl font-bold text-gray-800 mb-2">Ephemeral (Pod-Local)</h3>
                        <p class="text-gray-600 mb-4">Tied strictly to the Pod's lifecycle.</p>
                        <ul class="list-disc list-inside text-sm text-gray-500 space-y-1">
                            <li><strong>emptyDir:</strong> Scratch space.</li>
                            <li><strong>hostPath:</strong> Node access (Warning: Security Risk!).</li>
                        </ul>
                    </div>
                    
                    <!-- ConfigMap Card (New) -->
                    <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-fuchsia-500 hover-lift">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="text-xl font-bold text-gray-800">ConfigMap Volume</h3>
                            <span class="text-xs bg-fuchsia-100 text-fuchsia-800 px-2 py-1 rounded">Configuration</span>
                        </div>
                        <p class="text-gray-600 mb-3 text-sm">Injects configuration data (files) into a Pod directory. Updates automatically when ConfigMap changes (eventually).</p>
                        <div class="yaml-block">
<span class="yaml-key">volumes:</span>
  - <span class="yaml-key">name:</span> <span class="yaml-val">config-vol</span>
    <span class="yaml-key">configMap:</span>
      <span class="yaml-key">name:</span> <span class="yaml-val">app-settings</span>
<span class="yaml-comment"># Use Case: Mounting nginx.conf or application.properties</span></div>
                    </div>

                    <!-- Persistent Card -->
                    <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-indigo-600 hover-lift">
                        <h3 class="text-xl font-bold text-gray-800 mb-2">Persistent (Cluster-Level)</h3>
                        <p class="text-gray-600 mb-4">Independent lifecycle. Data survives Pod restarts.</p>
                        <ul class="list-disc list-inside text-sm text-gray-500 space-y-1">
                            <li><strong>PV/PVC:</strong> Standard database storage.</li>
                            <li><strong>StatefulSets:</strong> Stable identities.</li>
                        </ul>
                    </div>
                </div>

                <!-- Visualization: Volume Usage Distribution -->
                <div class="bg-white p-6 rounded-xl shadow-lg flex flex-col justify-center">
                    <h4 class="text-center font-bold text-gray-700 mb-4">Common Volume Usage Strategy</h4>
                    <div class="chart-container">
                        <canvas id="volumeTypesChart"></canvas>
                    </div>
                    <p class="text-center text-xs text-gray-400 mt-4 italic">
                        ConfigMaps are heavily used for stateless app configuration, while PVCs dominate stateful workloads.
                    </p>
                </div>
            </div>
        </section>

        <!-- SECTION 2: PROVISIONING ARCHITECTURE -->
        <section class="bg-indigo-50 rounded-3xl p-8 md:p-12">
            <div class="mb-10 text-center">
                <h2 class="text-3xl font-bold text-indigo-900">2. Provisioning Architecture</h2>
                <p class="mt-4 text-indigo-700 max-w-3xl mx-auto">
                    How storage actually gets created and consumed.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                <!-- Static Provisioning -->
                <div class="bg-white p-6 rounded-xl shadow border-l-4 border-gray-400">
                    <h3 class="font-bold text-xl mb-2 text-gray-700">Method A: Static Provisioning</h3>
                    <p class="text-sm text-gray-600 mb-4">The "Old School" way. Admin pre-creates disks.</p>
                    <ol class="list-decimal list-inside text-sm space-y-2 text-gray-700">
                        <li>Admin creates physical disk (e.g., EBS volume).</li>
                        <li>Admin creates <strong>PersistentVolume (PV)</strong> object mapping to disk.</li>
                        <li>User creates <strong>PVC</strong> which binds to the existing PV.</li>
                    </ol>
                    <div class="mt-4 yaml-block">
<span class="yaml-comment"># PV (Static)</span>
<span class="yaml-key">kind:</span> <span class="yaml-val">PersistentVolume</span>
<span class="yaml-key">spec:</span>
  <span class="yaml-key">capacity:</span>
    <span class="yaml-key">storage:</span> <span class="yaml-val">10Gi</span>
  <span class="yaml-key">awsElasticBlockStore:</span> <span class="yaml-val">...</span></div>
                </div>

                <!-- Dynamic Provisioning -->
                <div class="bg-white p-6 rounded-xl shadow border-l-4 border-indigo-600">
                    <h3 class="font-bold text-xl mb-2 text-indigo-700">Method B: Dynamic Provisioning</h3>
                    <p class="text-sm text-gray-600 mb-4">The "Cloud Native" way. On-demand creation.</p>
                    <ol class="list-decimal list-inside text-sm space-y-2 text-gray-700">
                        <li>Admin creates <strong>StorageClass</strong> (Template).</li>
                        <li>User creates <strong>PVC</strong> referencing the StorageClass.</li>
                        <li>Provisioner automatically creates Disk & PV.</li>
                    </ol>
                    <div class="mt-4 yaml-block">
<span class="yaml-comment"># StorageClass (Dynamic)</span>
<span class="yaml-key">kind:</span> <span class="yaml-val">StorageClass</span>
<span class="yaml-key">provisioner:</span> <span class="yaml-val">ebs.csi.aws.com</span>
<span class="yaml-key">parameters:</span>
  <span class="yaml-key">type:</span> <span class="yaml-val">gp3</span></div>
                </div>
            </div>

            <!-- HTML/CSS Flow Diagram -->
            <div class="bg-white p-6 rounded-xl shadow-lg mb-12">
                <h4 class="text-center font-bold text-gray-800 mb-6">The Dynamic Provisioning Flow</h4>
                <div class="flex flex-col md:flex-row justify-center items-stretch gap-4 md:gap-0 max-w-5xl mx-auto relative">
                    <div class="flex-1 text-center p-4 bg-purple-50 rounded border border-purple-200">
                        <div class="font-bold text-purple-700">1. StorageClass</div>
                        <div class="text-xs text-gray-500">The "Template"</div>
                    </div>
                    <div class="hidden md:flex flex-col justify-center items-center w-12 text-gray-400">▶</div>
                    <div class="md:hidden text-center text-gray-400">▼</div>
                    <div class="flex-1 text-center p-4 bg-cyan-50 rounded border border-cyan-200">
                        <div class="font-bold text-cyan-700">2. User PVC</div>
                        <div class="text-xs text-gray-500">The "Request"</div>
                    </div>
                    <div class="hidden md:flex flex-col justify-center items-center w-12 text-gray-400">▶</div>
                    <div class="md:hidden text-center text-gray-400">▼</div>
                    <div class="flex-1 text-center p-4 bg-indigo-50 rounded border border-indigo-200">
                        <div class="font-bold text-indigo-700">3. PV Created</div>
                        <div class="text-xs text-gray-500">The "Result"</div>
                    </div>
                </div>
            </div>

            <!-- NEW SUBSECTION: POD MOUNTING -->
            <div class="border-t border-indigo-200 pt-10">
                <h3 class="text-2xl font-bold text-indigo-900 text-center mb-8">The Final Link: Mounting the Volume</h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
                    
                    <!-- Explanation Card -->
                    <div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-green-500">
                        <h4 class="font-bold text-lg mb-4 text-green-700">Pod Configuration Steps</h4>
                        <p class="text-sm text-gray-600 mb-4">Once the PVC exists, the Pod must reference it to use the storage.</p>
                        <ul class="space-y-4">
                            <li class="flex items-start">
                                <span class="bg-green-100 text-green-700 font-bold rounded-full w-6 h-6 flex items-center justify-center text-xs mr-3 mt-1 flex-shrink-0">1</span>
                                <p class="text-sm text-gray-600"><strong>Define Volume:</strong> In <code>spec.volumes</code>, declare the volume and link it to the PVC.</p>
                            </li>
                            <li class="flex items-start">
                                <span class="bg-green-100 text-green-700 font-bold rounded-full w-6 h-6 flex items-center justify-center text-xs mr-3 mt-1 flex-shrink-0">2</span>
                                <p class="text-sm text-gray-600"><strong>Mount Volume:</strong> In <code>spec.containers.volumeMounts</code>, specify the path inside the container where the data should appear.</p>
                            </li>
                        </ul>
                    </div>

                    <!-- Detailed YAML -->
                    <div class="yaml-block text-sm">
<span class="yaml-comment"># Pod Consuming a PVC</span>
<span class="yaml-key">apiVersion:</span> <span class="yaml-val">v1</span>
<span class="yaml-key">kind:</span> <span class="yaml-val">Pod</span>
<span class="yaml-key">metadata:</span>
  <span class="yaml-key">name:</span> <span class="yaml-val">web-server-pod</span>
<span class="yaml-key">spec:</span>
  <span class="yaml-key">containers:</span>
    - <span class="yaml-key">name:</span> <span class="yaml-val">nginx</span>
      <span class="yaml-key">image:</span> <span class="yaml-val">nginx:alpine</span>
      <span class="yaml-key">volumeMounts:</span>       <span class="yaml-comment"># &lt;-- Step 2: Where to put it</span>
        - <span class="yaml-key">mountPath:</span> <span class="yaml-val">"/usr/share/nginx/html"</span>
          <span class="yaml-key">name:</span> <span class="yaml-val">my-web-storage</span>
  <span class="yaml-key">volumes:</span>                <span class="yaml-comment"># &lt;-- Step 1: What to use</span>
    - <span class="yaml-key">name:</span> <span class="yaml-val">my-web-storage</span>
      <span class="yaml-key">persistentVolumeClaim:</span>
        <span class="yaml-key">claimName:</span> <span class="yaml-val">my-pvc-request</span>
</div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: ACCESS MODES & RECLAIM POLICIES (NEW) -->
        <section>
            <div class="mb-8 border-l-8 border-fuchsia-500 pl-6">
                <h2 class="text-3xl font-bold text-gray-800">3. Access Modes & Reclaim Policies</h2>
                <p class="mt-2 text-lg text-gray-600">
                    Controlling who can read/write and what happens when you delete the claim.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                
                <!-- Access Modes -->
                <div class="space-y-6">
                    <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                        <span class="bg-cyan-100 text-cyan-700 p-2 rounded-lg mr-3 text-sm">spec.accessModes</span>
                        Access Modes
                    </h3>
                    
                    <!-- RWO -->
                    <div class="bg-white p-4 rounded-lg shadow border-l-4 border-blue-500">
                        <h4 class="font-bold text-blue-700">ReadWriteOnce (RWO)</h4>
                        <p class="text-sm text-gray-600">Mounted by a <span class="font-bold">single node</span> as read-write.</p>
                        <p class="text-xs text-gray-400 mt-1 italic">Use case: Block storage (EBS, PD), standard Databases.</p>
                    </div>

                    <!-- ROX -->
                    <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-500">
                        <h4 class="font-bold text-green-700">ReadOnlyMany (ROX)</h4>
                        <p class="text-sm text-gray-600">Mounted by <span class="font-bold">multiple nodes</span> as read-only.</p>
                        <p class="text-xs text-gray-400 mt-1 italic">Use case: Loading static ML models or web assets across fleet.</p>
                    </div>

                    <!-- RWX -->
                    <div class="bg-white p-4 rounded-lg shadow border-l-4 border-orange-500">
                        <h4 class="font-bold text-orange-700">ReadWriteMany (RWX)</h4>
                        <p class="text-sm text-gray-600">Mounted by <span class="font-bold">multiple nodes</span> as read-write.</p>
                        <p class="text-xs text-gray-400 mt-1 italic">Use case: NFS, EFS, GlusterFS, Shared logs/CMS.</p>
                    </div>

                    <div class="yaml-block">
<span class="yaml-comment"># PVC Example</span>
<span class="yaml-key">kind:</span> <span class="yaml-val">PersistentVolumeClaim</span>
<span class="yaml-key">spec:</span>
  <span class="yaml-key">accessModes:</span>
    - <span class="yaml-val">ReadWriteMany</span> <span class="yaml-comment"># Requires NFS/EFS</span></div>
                </div>

                <!-- Reclaim Policies -->
                <div class="space-y-6">
                    <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                        <span class="bg-fuchsia-100 text-fuchsia-700 p-2 rounded-lg mr-3 text-sm">reclaimPolicy</span>
                        Reclaim Policies
                    </h3>
                    <p class="text-sm text-gray-500">What happens to the PV (data) when the PVC is deleted?</p>

                    <!-- Delete -->
                    <div class="bg-white p-4 rounded-lg shadow relative overflow-hidden">
                        <div class="absolute right-0 top-0 bg-red-100 text-red-600 px-2 py-1 text-xs font-bold">Default for Cloud</div>
                        <h4 class="font-bold text-gray-800">1. Delete</h4>
                        <p class="text-sm text-gray-600">The physical asset (AWS EBS / GKE PD) is deleted automatically.</p>
                    </div>

                    <!-- Retain -->
                    <div class="bg-white p-4 rounded-lg shadow relative overflow-hidden">
                        <div class="absolute right-0 top-0 bg-yellow-100 text-yellow-600 px-2 py-1 text-xs font-bold">Safest</div>
                        <h4 class="font-bold text-gray-800">2. Retain</h4>
                        <p class="text-sm text-gray-600">PV object remains "Released". Data persists. Requires manual cleanup.</p>
                    </div>

                    <!-- Recycle -->
                    <div class="bg-white p-4 rounded-lg shadow opacity-75">
                        <h4 class="font-bold text-gray-500">3. Recycle (Deprecated)</h4>
                        <p class="text-sm text-gray-500">Performs <code>rm -rf /thevolume/*</code>. Replaced by Dynamic Provisioning.</p>
                    </div>

                    <div class="yaml-block">
<span class="yaml-comment"># StorageClass Example</span>
<span class="yaml-key">kind:</span> <span class="yaml-val">StorageClass</span>
<span class="yaml-key">reclaimPolicy:</span> <span class="yaml-val">Retain</span> <span class="yaml-comment"># Prevents data loss</span></div>
                </div>

            </div>
        </section>

        <!-- SECTION 4: DATA LIFECYCLE (Snapshots & Clones) -->
        <section>
            <div class="mb-6 border-l-8 border-cyan-500 pl-6">
                <h2 class="text-3xl font-bold text-gray-800">4. Lifecycle & Protection</h2>
                <p class="mt-2 text-lg text-gray-600">
                    Advanced CSI capabilities for backup and debugging.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Visualization: Timeline -->
                <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
                    <h4 class="font-bold text-xl text-center mb-8 text-gray-700">The Volume Cloning Workflow</h4>
                    <div class="relative pl-8 border-l-2 border-indigo-100 space-y-8">
                        <div class="relative">
                            <div class="absolute -left-[41px] bg-indigo-500 h-6 w-6 rounded-full border-4 border-white shadow"></div>
                            <h5 class="font-bold text-indigo-600 text-sm">Prod DB Running</h5>
                            <p class="text-xs text-gray-500">Data accumulates.</p>
                        </div>
                        <div class="relative">
                            <div class="absolute -left-[41px] bg-cyan-500 h-6 w-6 rounded-full border-4 border-white shadow"></div>
                            <h5 class="font-bold text-cyan-600 text-sm">Clone PVC Created</h5>
                            <p class="text-xs text-gray-500"><code>dataSource: my-pvc</code></p>
                        </div>
                        <div class="relative">
                            <div class="absolute -left-[41px] bg-green-500 h-6 w-6 rounded-full border-4 border-white shadow"></div>
                            <h5 class="font-bold text-green-600 text-sm">Debug Pod Starts</h5>
                            <p class="text-xs text-gray-500">Uses exact data copy.</p>
                        </div>
                    </div>
                </div>

                <!-- Snapshots -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-fuchsia-500">
                    <h3 class="text-xl font-bold mb-4">Volume Snapshots</h3>
                    <p class="text-sm text-gray-600 mb-4">Standardized backup trigger via CSI.</p>
                    <div class="yaml-block">
<span class="yaml-key">kind:</span> <span class="yaml-val">VolumeSnapshot</span>
<span class="yaml-key">metadata:</span>
  <span class="yaml-key">name:</span> <span class="yaml-val">db-backup</span>
<span class="yaml-key">spec:</span>
  <span class="yaml-key">volumeSnapshotClassName:</span> <span class="yaml-val">csi-hostpath-snapclass</span>
  <span class="yaml-key">source:</span>
    <span class="yaml-key">persistentVolumeClaimName:</span> <span class="yaml-val">my-pvc</span></div>
                </div>
            </div>
        </section>

        <!-- SECTION 5: PERFORMANCE & LIMITS -->
        <section>
            <div class="mb-8 border-l-8 border-gray-700 pl-6">
                <h2 class="text-3xl font-bold text-gray-800">5. Performance & Scale</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Chart: Node Capacity -->
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h4 class="font-bold text-gray-700 mb-2">Node Volume Limits</h4>
                    <p class="text-xs text-gray-500 mb-4">Limits how many disks attach to one node.</p>
                    <div class="chart-container">
                        <canvas id="nodeLimitChart"></canvas>
                    </div>
                </div>

                <!-- Chart: Volume Attributes Class -->
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h4 class="font-bold text-gray-700 mb-2">Dynamic IOPS (AttributesClass)</h4>
                    <p class="text-xs text-gray-500 mb-4">Scaling performance without downtime.</p>
                    <div class="chart-container">
                        <canvas id="attributesChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 6: IMPERATIVE COMMAND CHEAT SHEET (NEW) -->
        <section class="bg-slate-900 rounded-3xl p-8 md:p-12 text-slate-300 shadow-2xl">
            <div class="mb-10 text-center">
                <h2 class="text-3xl font-bold text-white mb-2 flex justify-center items-center gap-3">
                    <span class="text-4xl">⌨️</span> Imperative Command Cheat Sheet
                </h2>
                <p class="text-slate-400">Essential CLI operations for managing, debugging, and inspecting storage.</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <!-- Category: Inspection -->
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 hover:border-indigo-500 transition-colors">
                    <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                        <span class="bg-indigo-500 w-2 h-6 rounded mr-3"></span>
                        Inspection & Debugging
                    </h3>
                    <div class="space-y-6">
                        <div>
                            <div class="flex justify-between items-baseline mb-2">
                                <div class="text-xs text-indigo-400 uppercase font-bold">Verify Mounts</div>
                                <span class="text-[10px] bg-indigo-900 text-indigo-200 px-2 py-0.5 rounded">Inside Pod</span>
                            </div>
                            <code class="block bg-black p-3 rounded text-green-400 font-mono text-sm border border-slate-700">
                                kubectl exec -it &lt;pod&gt; -- df -h
                            </code>
                            <p class="text-xs text-slate-500 mt-1">Confirms if the volume is mounted and checks usage.</p>
                        </div>
                        
                        <div>
                            <div class="flex justify-between items-baseline mb-2">
                                <div class="text-xs text-indigo-400 uppercase font-bold">Troubleshoot PVC</div>
                                <span class="text-[10px] bg-red-900 text-red-200 px-2 py-0.5 rounded">Errors</span>
                            </div>
                            <code class="block bg-black p-3 rounded text-green-400 font-mono text-sm border border-slate-700">
                                kubectl describe pvc &lt;pvc-name&gt;
                            </code>
                            <p class="text-xs text-slate-500 mt-1">Check "Events" at the bottom (e.g., ProvisioningFailed).</p>
                        </div>

                        <div>
                            <div class="flex justify-between items-baseline mb-2">
                                <div class="text-xs text-indigo-400 uppercase font-bold">Filter Health Issues</div>
                                <span class="text-[10px] bg-yellow-900 text-yellow-200 px-2 py-0.5 rounded">Monitoring</span>
                            </div>
                            <code class="block bg-black p-3 rounded text-green-400 font-mono text-sm border border-slate-700">
                                kubectl get events --field-selector reason=VolumeConditionAbnormal
                            </code>
                        </div>
                    </div>
                </div>

                <!-- Category: Management -->
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 hover:border-cyan-500 transition-colors">
                    <h3 class="text-xl font-bold text-white mb-6 flex items-center">
                        <span class="bg-cyan-500 w-2 h-6 rounded mr-3"></span>
                        Management & Lifecycle
                    </h3>
                    <div class="space-y-6">
                        <div>
                            <div class="flex justify-between items-baseline mb-2">
                                <div class="text-xs text-cyan-400 uppercase font-bold">Sort PVs</div>
                                <span class="text-[10px] bg-cyan-900 text-cyan-200 px-2 py-0.5 rounded">Inventory</span>
                            </div>
                            <code class="block bg-black p-3 rounded text-green-400 font-mono text-sm border border-slate-700">
                                kubectl get pv --sort-by=.spec.capacity.storage
                            </code>
                            <p class="text-xs text-slate-500 mt-1">Quickly find largest volumes in the cluster.</p>
                        </div>

                        <div>
                            <div class="flex justify-between items-baseline mb-2">
                                <div class="text-xs text-cyan-400 uppercase font-bold">Set Default Class</div>
                                <span class="text-[10px] bg-cyan-900 text-cyan-200 px-2 py-0.5 rounded">Admin</span>
                            </div>
                            <code class="block bg-black p-3 rounded text-green-400 font-mono text-sm border border-slate-700 break-all">
                                kubectl patch sc &lt;name&gt; -p '{"metadata": {"annotations":{"storageclass.kubernetes.io/is-default-class":"true"}}}'
                            </code>
                        </div>

                        <div>
                            <div class="flex justify-between items-baseline mb-2">
                                <div class="text-xs text-cyan-400 uppercase font-bold">Delete & Reclaim</div>
                                <span class="text-[10px] bg-red-900 text-red-200 px-2 py-0.5 rounded">Destructive</span>
                            </div>
                            <code class="block bg-black p-3 rounded text-green-400 font-mono text-sm border border-slate-700">
                                kubectl delete pvc &lt;pvc-name&gt;
                            </code>
                            <p class="text-xs text-slate-500 mt-1">Triggers ReclaimPolicy (Retain will keep data, Delete will wipe it).</p>
                        </div>
                    </div>
                </div>

            </div>
        </section>

    </main>

    <footer class="bg-white py-8 border-t border-gray-200 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center text-gray-400 text-sm">
            <p>Generated based on Kubernetes Storage Cheat Sheet v1.1</p>
        </div>
    </footer>

    <!-- JAVASCRIPT FOR CHARTS -->
    <script>
        // --- 1. Common Volume Types Donut Chart (Updated Labels) ---
        const ctxTypes = document.getElementById('volumeTypesChart').getContext('2d');
        new Chart(ctxTypes, {
            type: 'doughnut',
            data: {
                labels: ['Persistent (PVC/EBS)', 'ConfigMap/Secret', 'EmptyDir (Scratch)', 'HostPath (System)'],
                datasets: [{
                    data: [40, 25, 25, 10], 
                    backgroundColor: ['#4F46E5', '#D946EF', '#06B6D4', '#94A3B8'],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom', labels: { usePointStyle: true, font: { size: 10 } } },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                const item = tooltipItems[0];
                                let label = item.chart.data.labels[item.dataIndex];
                                return Array.isArray(label) ? label.join(' ') : label;
                            }
                        }
                    }
                }
            }
        });

        // --- 2. Node Limits Stacked Bar Chart ---
        const ctxLimits = document.getElementById('nodeLimitChart').getContext('2d');
        new Chart(ctxLimits, {
            type: 'bar',
            data: {
                labels: ['Node-A', 'Node-B', 'Node-C'],
                datasets: [
                    { label: 'Attached', data: [22, 5, 18], backgroundColor: '#4F46E5', borderRadius: 4 },
                    { label: 'Available', data: [3, 20, 7], backgroundColor: '#E2E8F0', borderRadius: 4 }
                ]
            },
            options: {
                maintainAspectRatio: false,
                scales: {
                    x: { stacked: true, grid: { display: false } },
                    y: { stacked: true, beginAtZero: true }
                },
                plugins: { tooltip: { callbacks: { title: args => args[0].label } } }
            }
        });

        // --- 3. Volume Attributes Class Line Chart ---
        const ctxAttributes = document.getElementById('attributesChart').getContext('2d');
        new Chart(ctxAttributes, {
            type: 'line',
            data: {
                labels: ['08:00', '10:00', '12:00', '14:00', '16:00'],
                datasets: [
                    {
                        label: 'IOPS Limit',
                        data: [3000, 3000, 10000, 10000, 3000], 
                        borderColor: '#D946EF', 
                        backgroundColor: 'rgba(217, 70, 239, 0.1)',
                        fill: true,
                        stepped: true
                    }
                ]
            },
            options: {
                maintainAspectRatio: false,
                scales: { y: { beginAtZero: true } },
                plugins: { tooltip: { callbacks: { title: args => args[0].label } } }
            }
        });
    </script>
</body>
</html>
