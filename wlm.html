<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Workload Management - Interactive Infographic</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

    <!-- 
        PALETTE: VIBRANT NEON
        Primary (Purple): #6200EA
        Secondary (Teal): #00BFA5
        Accent (Pink): #FF0080
        Background: #0F172A (Slate 900)
        Card Bg: #1E293B (Slate 800)
        Text: #F8FAFC (Slate 50)
    -->

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0F172A; /* Slate 900 */
            color: #F8FAFC;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #1E293B; 
        }
        ::-webkit-scrollbar-thumb {
            background: #6200EA; 
            border-radius: 5px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #00BFA5; 
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        /* Diagram Styles (CSS Only - NO SVG) */
        .flow-box {
            background: linear-gradient(135deg, #1E293B 0%, #334155 100%);
            border: 2px solid #00BFA5;
            border-radius: 0.75rem;
            padding: 1rem;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease;
        }
        .flow-box:hover {
            transform: translateY(-5px);
            border-color: #FF0080;
        }
        .arrow-down::after {
            content: '‚ñº';
            display: block;
            color: #6200EA;
            font-size: 1.5rem;
            margin: 0.5rem 0;
            text-align: center;
        }
        .arrow-right::after {
            content: '‚ñ∂';
            display: inline-block;
            color: #6200EA;
            font-size: 1.5rem;
            margin: 0 0.5rem;
        }
        
        /* Timeline Styles */
        .timeline-item {
            border-left: 4px solid #6200EA;
            padding-left: 1.5rem;
            position: relative;
            padding-bottom: 2rem;
        }
        .timeline-item::before {
            content: '';
            width: 16px;
            height: 16px;
            background-color: #00BFA5;
            border-radius: 50%;
            position: absolute;
            left: -10px;
            top: 0;
            border: 2px solid #F8FAFC;
        }

        .glass-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Code Block Styling */
        .code-block {
            background-color: #020617; /* Slate 950 */
            border: 1px solid #334155;
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: monospace;
            font-size: 0.8rem;
            color: #e2e8f0;
            overflow-x: auto;
        }
        .code-key { color: #c084fc; } /* Purple 400 */
        .code-val { color: #2dd4bf; } /* Teal 400 */
        .code-str { color: #f472b6; } /* Pink 400 */
        .code-cmd { color: #fbbf24; } /* Amber 400 */
    </style>
</head>
<body class="antialiased selection:bg-purple-500 selection:text-white">

    <!-- HERO SECTION -->
    <header class="relative overflow-hidden bg-gradient-to-r from-slate-900 via-purple-900 to-slate-900 border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24 grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div>
                <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight text-white mb-6">
                    Mastering <span class="text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-purple-400">K8s Workloads</span>
                </h1>
                <p class="text-lg md:text-xl text-slate-300 leading-relaxed mb-8">
                    A visual guide to managing applications in Kubernetes. From stateless microservices to complex stateful databases and batch processes.
                </p>
                <div class="flex flex-wrap gap-4">
                    <span class="px-4 py-2 rounded-full bg-purple-600/20 border border-purple-500 text-purple-200 text-sm font-semibold">Deployments</span>
                    <span class="px-4 py-2 rounded-full bg-teal-600/20 border border-teal-500 text-teal-200 text-sm font-semibold">StatefulSets</span>
                    <span class="px-4 py-2 rounded-full bg-pink-600/20 border border-pink-500 text-pink-200 text-sm font-semibold">Autoscaling</span>
                </div>
            </div>
            
            <!-- Hero Stat Cards -->
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-xl transform rotate-1 hover:rotate-0 transition-all">
                    <div class="text-3xl font-bold text-teal-400 mb-2">Stateless</div>
                    <div class="text-sm text-slate-400">Web Servers & APIs using Deployments</div>
                </div>
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-xl transform -rotate-1 hover:rotate-0 transition-all">
                    <div class="text-3xl font-bold text-purple-400 mb-2">Stateful</div>
                    <div class="text-sm text-slate-400">Databases using StatefulSets</div>
                </div>
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-xl transform rotate-1 hover:rotate-0 transition-all">
                    <div class="text-3xl font-bold text-pink-400 mb-2">Batch</div>
                    <div class="text-sm text-slate-400">Jobs & CronJobs</div>
                </div>
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 shadow-xl transform -rotate-1 hover:rotate-0 transition-all">
                    <div class="text-3xl font-bold text-blue-400 mb-2">Scale</div>
                    <div class="text-sm text-slate-400">HPA & VPA Automation</div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-24">

        <!-- SECTION 1: THE WORKLOAD LANDSCAPE -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div class="space-y-6">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-1 bg-teal-400 rounded"></div>
                    <h2 class="text-2xl font-bold text-white uppercase tracking-wider">The Ecosystem</h2>
                </div>
                <h3 class="text-4xl font-bold text-slate-100">Choosing the Right Controller</h3>
                <p class="text-slate-300 leading-relaxed text-lg">
                    Kubernetes offers specialized controllers for different application needs. While <strong>Deployments</strong> handle the vast majority of standard applications, specialized needs like node-specific monitoring (DaemonSets) or database persistence (StatefulSets) require distinct approaches.
                </p>
                <div class="bg-slate-800/50 p-6 rounded-lg border-l-4 border-purple-500">
                    <p class="text-purple-200 italic">
                        "Deployments manage ReplicaSets, which in turn manage Pods. This abstraction allows for declarative updates and seamless rollbacks."
                    </p>
                </div>
            </div>
            
            <div class="glass-card p-6 rounded-2xl shadow-2xl">
                <div class="chart-container">
                    <canvas id="workloadTypesChart"></canvas>
                </div>
                <p class="text-center text-sm text-slate-400 mt-4">
                    <strong>Figure 1:</strong> Typical distribution of workload types in a production cluster.
                </p>
            </div>
        </section>

        <!-- SECTION 2: DEPLOYMENT ARCHITECTURE (DIAGRAM & SPECS) -->
        <section class="bg-slate-800 rounded-3xl p-8 md:p-12 shadow-2xl border border-slate-700">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-white mb-4">Deployment & ReplicaSet</h2>
                <p class="text-slate-400 max-w-2xl mx-auto">
                    The standard for stateless apps. Deployments provide declarative updates and rollbacks, managing ReplicaSets to ensure the desired number of pods are running.
                </p>
            </div>

            <!-- CSS Diagram Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 relative items-center justify-items-center mb-12">
                
                <!-- Deployment Node -->
                <div class="flow-box w-full max-w-xs z-10">
                    <div class="text-purple-400 text-4xl mb-2">‚öôÔ∏è</div>
                    <h3 class="text-xl font-bold text-white mb-2">Deployment</h3>
                    <p class="text-xs text-slate-300 bg-slate-700 p-2 rounded">
                        Strategy: RollingUpdate
                    </p>
                    <div class="mt-2 text-sm text-teal-300">"The Architect"</div>
                </div>

                <!-- Arrow Indicator -->
                <div class="hidden md:block text-4xl text-slate-500 animate-pulse">‚ñ∂</div>
                <div class="md:hidden text-4xl text-slate-500 animate-pulse my-2">‚ñº</div>

                <!-- ReplicaSet Node -->
                <div class="flow-box w-full max-w-xs z-10">
                    <div class="text-teal-400 text-4xl mb-2">üîÑ</div>
                    <h3 class="text-xl font-bold text-white mb-2">ReplicaSet</h3>
                    <p class="text-xs text-slate-300 bg-slate-700 p-2 rounded">
                        selector: app=web
                    </p>
                    <div class="mt-2 text-sm text-teal-300">"The Enforcer"</div>
                </div>
            </div>

            <!-- Technical Specs Box: Deployment -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 bg-slate-900/50 p-6 rounded-xl border border-slate-600">
                <div>
                    <h4 class="text-lg font-bold text-white mb-2 flex items-center">
                        <span class="w-2 h-2 bg-green-400 rounded-full mr-2"></span> Technical Specs
                    </h4>
                    <ul class="text-sm text-slate-300 space-y-2 mb-4">
                        <li><strong>Use Case:</strong> Stateless Web Apps, Microservices.</li>
                        <li><strong>Strategy:</strong> <span class="text-pink-400">RollingUpdate</span> (Default) - Updates pods incrementally with zero downtime.</li>
                        <li><strong>ReplicaSet:</strong> Managed automatically. <span class="text-slate-500 italic">Rarely manipulated directly.</span></li>
                    </ul>
                    <div class="code-block mb-2">
                        <div class="text-xs text-slate-500 mb-1"># Imperative Commands</div>
                        <span class="code-cmd">kubectl</span> create deploy nginx --image=nginx --replicas=3<br>
                        <span class="code-cmd">kubectl</span> set image deploy/nginx nginx=nginx:1.22<br>
                        <span class="code-cmd">kubectl</span> rollout undo deploy/nginx
                    </div>
                </div>
                <div class="code-block h-full">
                    <div class="text-xs text-slate-500 mb-1"># deployment.yaml</div>
                    <span class="code-key">apiVersion:</span> <span class="code-str">apps/v1</span><br>
                    <span class="code-key">kind:</span> <span class="code-str">Deployment</span><br>
                    <span class="code-key">metadata:</span><br>
                    &nbsp;&nbsp;<span class="code-key">name:</span> <span class="code-str">web-app</span><br>
                    <span class="code-key">spec:</span><br>
                    &nbsp;&nbsp;<span class="code-key">replicas:</span> <span class="code-val">3</span><br>
                    &nbsp;&nbsp;<span class="code-key">strategy:</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">type:</span> <span class="code-str">RollingUpdate</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">rollingUpdate:</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">maxUnavailable:</span> <span class="code-val">1</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">maxSurge:</span> <span class="code-val">1</span>
                </div>
            </div>
        </section>

        <!-- SECTION 3: STATEFUL VS STATELESS -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
            <div class="glass-card p-6 rounded-2xl shadow-2xl order-2 lg:order-1">
                <div class="chart-container mb-6">
                    <canvas id="comparisonRadar"></canvas>
                </div>
                
                <!-- StatefulSet Technicals -->
                <div class="bg-slate-900 rounded-lg p-4 border border-slate-700">
                    <h4 class="text-purple-400 font-bold mb-2">StatefulSet Configuration</h4>
                    <div class="code-block">
                        <span class="code-key">kind:</span> <span class="code-str">StatefulSet</span><br>
                        <span class="code-key">spec:</span><br>
                        &nbsp;&nbsp;<span class="code-key">serviceName:</span> <span class="code-str">"mysql"</span><br>
                        &nbsp;&nbsp;<span class="code-key">replicas:</span> <span class="code-val">3</span><br>
                        &nbsp;&nbsp;<span class="code-key">template:</span> { ... }<br>
                        &nbsp;&nbsp;<span class="code-key">volumeClaimTemplates:</span><br>
                        &nbsp;&nbsp;- <span class="code-key">metadata:</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">name:</span> <span class="code-str">db-data</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">spec:</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">accessModes:</span> [<span class="code-str">"ReadWriteOnce"</span>]
                    </div>
                </div>
            </div>

            <div class="space-y-6 order-1 lg:order-2">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-1 bg-purple-400 rounded"></div>
                    <h2 class="text-2xl font-bold text-white uppercase tracking-wider">StatefulSets (STS)</h2>
                </div>
                <h3 class="text-4xl font-bold text-slate-100">Persistence & Identity</h3>
                <p class="text-slate-300 leading-relaxed text-lg">
                    Used for applications that require a stable network identity (like `mysql-0`, `mysql-1`) and persistent storage that sticks with a specific pod instance.
                </p>
                
                <ul class="space-y-4 mt-6 border-b border-slate-700 pb-6">
                    <li class="flex items-start">
                        <span class="text-purple-400 mr-3 text-xl">‚úì</span>
                        <div class="text-slate-300">
                            <strong>Use Case:</strong> Databases (MySQL, Mongo), Kafka, ElasticSearch.
                        </div>
                    </li>
                    <li class="flex items-start">
                        <span class="text-purple-400 mr-3 text-xl">‚úì</span>
                        <div class="text-slate-300">
                            <strong>Strategy:</strong> <span class="text-pink-400">OrderedReady</span> (Default). Pods are deployed/terminated one at a time, in order (0 -> 1 -> 2).
                        </div>
                    </li>
                </ul>
                
                <div class="mt-4">
                    <p class="text-sm font-bold text-teal-400 mb-2">Imperative Command:</p>
                    <div class="code-block inline-block w-full">
                         <span class="text-slate-500"># Mostly declarative, but scaling works:</span><br>
                         <span class="code-cmd">kubectl</span> scale sts mongo --replicas=5
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: DAEMONSETS (NEW SECTION) -->
        <section class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-8 border border-slate-700">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div>
                    <h2 class="text-3xl font-bold text-white mb-4">DaemonSet (DS)</h2>
                    <p class="text-slate-300 mb-4">
                        Ensures that a copy of the Pod runs on <strong>every</strong> node (or a subset selected by selectors) in the cluster. As nodes are added, Pods are added to them.
                    </p>
                    <ul class="text-sm text-slate-400 space-y-2 mb-6">
                        <li><strong class="text-white">Use Case:</strong> Log collectors (Fluentd), Monitoring (Prometheus Node Exporter), CNI Plugins.</li>
                        <li><strong class="text-white">Strategy:</strong> <span class="text-pink-400">RollingUpdate</span> (Deletes and creates pods on nodes incrementally).</li>
                    </ul>
                    <div class="code-block">
                         <span class="text-slate-500"># Rolling restart of a DS</span><br>
                         <span class="code-cmd">kubectl</span> rollout restart ds/fluentd
                    </div>
                </div>
                <div class="code-block h-full shadow-lg">
                    <div class="text-xs text-slate-500 mb-1"># daemonset.yaml</div>
                    <span class="code-key">apiVersion:</span> <span class="code-str">apps/v1</span><br>
                    <span class="code-key">kind:</span> <span class="code-str">DaemonSet</span><br>
                    <span class="code-key">metadata:</span><br>
                    &nbsp;&nbsp;<span class="code-key">name:</span> <span class="code-str">fluentd</span><br>
                    <span class="code-key">spec:</span><br>
                    &nbsp;&nbsp;<span class="code-key">selector:</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">matchLabels:</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">name:</span> <span class="code-str">fluentd</span><br>
                    &nbsp;&nbsp;<span class="code-key">template:</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">spec:</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">tolerations:</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="code-key">key:</span> <span class="code-str">node-role/master</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">effect:</span> <span class="code-str">NoSchedule</span>
                </div>
            </div>
        </section>

        <!-- SECTION 5: BATCH PROCESSING TIMELINE -->
        <section class="bg-slate-900 border border-slate-700 rounded-3xl p-8">
            <h2 class="text-3xl font-bold text-white mb-8 border-b border-slate-700 pb-4">Batch Processing Lifecycle</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                <!-- Column 1: Jobs -->
                <div>
                    <h3 class="text-xl font-bold text-teal-400 mb-6">Jobs (Run-to-Completion)</h3>
                    <p class="text-sm text-slate-400 mb-4">For one-off tasks like database migrations or batch calculations.</p>
                    
                    <div class="border-l-2 border-slate-700 ml-4 space-y-8 mb-6">
                        <div class="timeline-item">
                            <h4 class="text-white font-bold">Start</h4>
                            <div class="code-block mt-2">
                                <span class="code-cmd">kubectl</span> create job pi --image=perl
                            </div>
                        </div>
                        <div class="timeline-item">
                            <h4 class="text-white font-bold">Auto-Cleanup</h4>
                            <p class="text-xs text-slate-400 mb-2">Prevent clutter with TTL.</p>
                            <div class="code-block text-xs">
                                <span class="code-key">kind:</span> <span class="code-str">Job</span><br>
                                <span class="code-key">spec:</span><br>
                                &nbsp;&nbsp;<span class="code-key">ttlSecondsAfterFinished:</span> <span class="code-val">100</span><br>
                                &nbsp;&nbsp;<span class="code-key">completions:</span> <span class="code-val">1</span><br>
                                &nbsp;&nbsp;<span class="code-key">backoffLimit:</span> <span class="code-val">4</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Column 2: CronJobs -->
                <div>
                    <h3 class="text-xl font-bold text-purple-400 mb-6">CronJobs (Scheduled)</h3>
                    <p class="text-sm text-slate-400 mb-4">Time-based execution (like Linux cron) for backups or reports.</p>

                    <div class="space-y-4">
                        <div class="bg-slate-800 p-4 rounded-lg border border-slate-600">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-white font-bold">Imperative Create</span>
                            </div>
                            <div class="code-block">
                                <span class="code-cmd">kubectl</span> create cronjob backup --image=busybox --schedule="*/1 * * * *"
                            </div>
                        </div>

                        <div class="code-block">
                             <span class="text-xs text-slate-500 mb-1"># cronjob.yaml</span><br>
                             <span class="code-key">kind:</span> <span class="code-str">CronJob</span><br>
                             <span class="code-key">spec:</span><br>
                             &nbsp;&nbsp;<span class="code-key">schedule:</span> <span class="code-str">"0 0 * * *"</span><br>
                             &nbsp;&nbsp;<span class="code-key">jobTemplate:</span><br>
                             &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">spec:</span> { ... }
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 6: AUTOSCALING DYNAMICS -->
        <section class="space-y-12">
            <div class="text-center max-w-3xl mx-auto">
                <h2 class="text-3xl font-bold text-white mb-4">Elasticity: The Power of Autoscaling</h2>
                <p class="text-slate-400">
                    Kubernetes can automatically adjust your workload to match demand. 
                    <strong>HPA (Horizontal)</strong> adds more pods when CPU spikes. 
                    <strong>VPA (Vertical)</strong> makes existing pods larger when they need more RAM.
                </p>
            </div>

            <!-- HPA Line Chart -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="glass-card p-6 rounded-2xl shadow-xl">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-teal-400">HPA (Horizontal)</h3>
                        <div class="code-block text-xs py-1 px-2">
                            <span class="code-cmd">kubectl</span> autoscale deploy/web --min=2 --max=10
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="hpaChart"></canvas>
                    </div>
                </div>

                <div class="glass-card p-6 rounded-2xl shadow-xl">
                    <h3 class="text-xl font-bold text-purple-400 mb-4">VPA (Vertical)</h3>
                    <div class="chart-container" id="plotlyVpaDiv"></div>
                </div>
            </div>

            <!-- Configuration Examples for Autoscaling -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                <!-- HPA Config -->
                <div class="bg-slate-900 border border-slate-700 rounded-xl p-6 shadow-lg">
                    <h4 class="text-teal-400 font-bold mb-4 flex items-center">
                        <span class="text-2xl mr-2">‚áπ</span> HPA Configuration
                    </h4>
                    <div class="code-block mb-4 text-xs">
                        <span class="code-key">apiVersion:</span> <span class="code-str">autoscaling/v2</span><br>
                        <span class="code-key">kind:</span> <span class="code-str">HorizontalPodAutoscaler</span><br>
                        <span class="code-key">metadata:</span><br>
                        &nbsp;&nbsp;<span class="code-key">name:</span> <span class="code-str">web-hpa</span><br>
                        <span class="code-key">spec:</span><br>
                        &nbsp;&nbsp;<span class="code-key">scaleTargetRef:</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">kind:</span> <span class="code-str">Deployment</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">name:</span> <span class="code-str">web-app</span><br>
                        &nbsp;&nbsp;<span class="code-key">minReplicas:</span> <span class="code-val">2</span><br>
                        &nbsp;&nbsp;<span class="code-key">maxReplicas:</span> <span class="code-val">10</span><br>
                        &nbsp;&nbsp;<span class="code-key">metrics:</span><br>
                        &nbsp;&nbsp;- <span class="code-key">type:</span> <span class="code-str">Resource</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">resource:</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">name:</span> <span class="code-str">cpu</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">target:</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">type:</span> <span class="code-str">Utilization</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">averageUtilization:</span> <span class="code-val">50</span>
                    </div>
                    <div class="text-sm text-slate-400">
                        <strong class="text-white">Note:</strong>
                        <ul class="list-disc pl-4 mt-2 space-y-1">
                            <li>Requires <strong>Metrics Server</strong> installed.</li>
                            <li>Deployment must have CPU <code>requests</code> defined.</li>
                            <li>Best for stateless apps handling traffic spikes.</li>
                        </ul>
                    </div>
                </div>
            
                <!-- VPA Config -->
                <div class="bg-slate-900 border border-slate-700 rounded-xl p-6 shadow-lg">
                    <h4 class="text-purple-400 font-bold mb-4 flex items-center">
                        <span class="text-2xl mr-2">‚áï</span> VPA Configuration
                    </h4>
                    <div class="code-block mb-4 text-xs">
                        <span class="code-key">apiVersion:</span> <span class="code-str">autoscaling.k8s.io/v1</span><br>
                        <span class="code-key">kind:</span> <span class="code-str">VerticalPodAutoscaler</span><br>
                        <span class="code-key">metadata:</span><br>
                        &nbsp;&nbsp;<span class="code-key">name:</span> <span class="code-str">web-vpa</span><br>
                        <span class="code-key">spec:</span><br>
                        &nbsp;&nbsp;<span class="code-key">targetRef:</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">apiVersion:</span> <span class="code-str">"apps/v1"</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">kind:</span> <span class="code-str">Deployment</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">name:</span> <span class="code-str">web-app</span><br>
                        &nbsp;&nbsp;<span class="code-key">updatePolicy:</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-key">updateMode:</span> <span class="code-str">"Auto"</span>
                    </div>
                    <div class="text-sm text-slate-400">
                        <strong class="text-white">Note:</strong>
                        <ul class="list-disc pl-4 mt-2 space-y-1">
                            <li>Requires <strong>VPA Controller</strong> (CRD).</li>
                            <li><code>Auto</code> mode restarts pods to resize them.</li>
                            <li>Use <code>"Off"</code> for recommendations without restarts.</li>
                            <li>Avoid mixing HPA (CPU/Mem) and VPA on same metrics.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 border-t border-slate-800 py-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h2 class="text-2xl font-bold text-white mb-6">Command Reference Summary</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-left">
                <div class="bg-slate-800 p-4 rounded border border-slate-700 hover:border-teal-500 transition-colors">
                    <div class="font-mono text-teal-400 mb-1">create deploy</div>
                    <div class="text-xs text-slate-400">Launch new app</div>
                </div>
                <div class="bg-slate-800 p-4 rounded border border-slate-700 hover:border-teal-500 transition-colors">
                    <div class="font-mono text-teal-400 mb-1">scale deploy</div>
                    <div class="text-xs text-slate-400">Change replica count</div>
                </div>
                <div class="bg-slate-800 p-4 rounded border border-slate-700 hover:border-teal-500 transition-colors">
                    <div class="font-mono text-teal-400 mb-1">rollout undo</div>
                    <div class="text-xs text-slate-400">Revert update</div>
                </div>
                <div class="bg-slate-800 p-4 rounded border border-slate-700 hover:border-teal-500 transition-colors">
                    <div class="font-mono text-teal-400 mb-1">autoscale</div>
                    <div class="text-xs text-slate-400">Set HPA limits</div>
                </div>
            </div>
            <p class="text-slate-500 text-sm mt-8">
                Generated based on Kubernetes Workload Management Guide. No SVG or Mermaid used.
            </p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- UTILITY: Label Wrapping Logic (16 char limit) ---
        function wrapLabels(labels) {
            return labels.map(label => {
                if (label.length > 16) {
                    const words = label.split(' ');
                    const lines = [];
                    let currentLine = words[0];

                    for (let i = 1; i < words.length; i++) {
                        if ((currentLine + " " + words[i]).length <= 16) {
                            currentLine += " " + words[i];
                        } else {
                            lines.push(currentLine);
                            currentLine = words[i];
                        }
                    }
                    lines.push(currentLine);
                    return lines;
                }
                return label;
            });
        }

        // --- SHARED CONFIG: Tooltip Callback ---
        const sharedTooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        const commonChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: { color: '#F8FAFC' } // Slate-50
                },
                tooltip: sharedTooltipConfig
            }
        };

        // --- CHART 1: Workload Types (Doughnut) ---
        const ctxWorkload = document.getElementById('workloadTypesChart').getContext('2d');
        const workloadLabelsRaw = ['Deployments (Stateless)', 'StatefulSets (Database)', 'DaemonSets (System)', 'Jobs & CronJobs (Batch)'];
        
        new Chart(ctxWorkload, {
            type: 'doughnut',
            data: {
                labels: wrapLabels(workloadLabelsRaw),
                datasets: [{
                    data: [65, 15, 10, 10], // Estimated distribution
                    backgroundColor: [
                        '#6200EA', // Purple
                        '#00BFA5', // Teal
                        '#FF0080', // Pink
                        '#3B82F6'  // Blue
                    ],
                    borderColor: '#1E293B',
                    borderWidth: 2
                }]
            },
            options: {
                ...commonChartOptions,
                cutout: '60%',
                plugins: {
                    ...commonChartOptions.plugins,
                    legend: {
                        position: 'right', // Moves legend to right for clarity
                        align: 'start',    // Aligns legend items to top
                        labels: { 
                            color: '#F8FAFC',
                            font: { size: 12 },
                            boxWidth: 15,
                            padding: 15
                        } 
                    }
                }
            }
        });

        // --- CHART 2: Comparison (Radar) ---
        const ctxRadar = document.getElementById('comparisonRadar').getContext('2d');
        const radarLabelsRaw = ['Scalability Ease', 'Data Persistence', 'Setup Simplicity', 'Network Identity', 'Update Speed'];

        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: wrapLabels(radarLabelsRaw),
                datasets: [
                    {
                        label: 'Deployment',
                        data: [9, 1, 9, 2, 9],
                        backgroundColor: 'rgba(98, 0, 234, 0.2)',
                        borderColor: '#6200EA',
                        pointBackgroundColor: '#6200EA'
                    },
                    {
                        label: 'StatefulSet',
                        data: [4, 10, 4, 10, 3],
                        backgroundColor: 'rgba(0, 191, 165, 0.2)',
                        borderColor: '#00BFA5',
                        pointBackgroundColor: '#00BFA5'
                    }
                ]
            },
            options: {
                ...commonChartOptions,
                scales: {
                    r: {
                        grid: { color: '#334155' },
                        angleLines: { color: '#334155' },
                        pointLabels: { color: '#F8FAFC', font: { size: 12 } },
                        suggestedMin: 0,
                        suggestedMax: 10
                    }
                }
            }
        });

        // --- CHART 3: HPA Simulation (Line) ---
        const ctxHpa = document.getElementById('hpaChart').getContext('2d');
        
        // Generate mock data for HPA
        const timePoints = ['10:00', '10:05', '10:10', '10:15', '10:20', '10:25', '10:30'];
        
        new Chart(ctxHpa, {
            type: 'line',
            data: {
                labels: timePoints,
                datasets: [
                    {
                        label: 'CPU Load (%)',
                        data: [20, 35, 85, 90, 45, 30, 25],
                        borderColor: '#FF0080', // Pink
                        backgroundColor: 'rgba(255, 0, 128, 0.1)',
                        yAxisID: 'y',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'Replica Count',
                        data: [2, 2, 5, 8, 8, 4, 2],
                        borderColor: '#00BFA5', // Teal
                        backgroundColor: '#00BFA5',
                        yAxisID: 'y1',
                        stepped: true, // Step chart for pod counts
                        borderWidth: 3
                    }
                ]
            },
            options: {
                ...commonChartOptions,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                scales: {
                    x: {
                        grid: { color: '#334155' },
                        ticks: { color: '#94a3b8' }
                    },
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        grid: { color: '#334155' },
                        ticks: { color: '#FF0080' },
                        title: { display: true, text: 'CPU %', color: '#FF0080' }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        grid: { drawOnChartArea: false },
                        ticks: { stepSize: 1, color: '#00BFA5' },
                        title: { display: true, text: 'Pods', color: '#00BFA5' }
                    }
                }
            }
        });

        // --- CHART 4: Plotly WebGL Scatter (VPA Node Optimization) ---
        // Simulating how VPA fits different sized pods (Memory vs CPU) into a node
        
        const podCount = 50;
        const xCPU = Array.from({length: podCount}, () => Math.random() * 4); // 0-4 cores
        const yMem = Array.from({length: podCount}, () => Math.random() * 8); // 0-8 GB
        const sizes = xCPU.map((c, i) => (c + yMem[i]) * 3); // Bubble size based on total resource

        const trace1 = {
            x: xCPU,
            y: yMem,
            mode: 'markers',
            type: 'scattergl', // Enforcing WebGL
            marker: {
                size: sizes,
                color: xCPU,
                colorscale: 'Viridis', // Cool-to-Warm
                opacity: 0.8,
                line: { color: 'white', width: 1 }
            },
            name: 'Pods'
        };

        const layout = {
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)',
            margin: { t: 20, r: 20, b: 40, l: 40 },
            xaxis: { 
                title: 'CPU Requests (Cores)', 
                color: '#94a3b8', 
                gridcolor: '#334155' 
            },
            yaxis: { 
                title: 'Memory Requests (GB)', 
                color: '#94a3b8', 
                gridcolor: '#334155' 
            },
            showlegend: false
        };

        const config = { responsive: true, displayModeBar: false };

        Plotly.newPlot('plotlyVpaDiv', [trace1], layout, config);

    </script>
</body>
</html>
